!function(t){"use strict";t.Scroller=function(e){return t.extend(!0,this.settings={},t.Scroller.defaults,e),this.toDisplay=[],this.timeout=null,this.container={width:0,height:0},this.offset={current:{x:0,y:0},previous:{x:0,y:0}},this.direction=null,this.prepareOptions()&&this.init(),this},t.Scroller.defaults={axis:"y",containerDimensions:!1,timeout:0,displayElements:{element:void 0,percent:60,hide:!1,onShow:void 0,onHide:void 0},classes:{prefix:"scroller",toDisplay:"{prefix}-toDisplay",hidden:"is-hidden"},onComplete:void 0},t.Scroller.prototype={prepareOptions:function(){var e=this;return t.each(e.settings.classes,function(t,i){"string"==typeof i&&(e.settings.classes[t]=i.replace(/{prefix}/,e.settings.classes.prefix))}),!0},setOptions:function(e){return t.extend(!0,this.settings,e),this},init:function(){this.requestAnimationFramePolyfill(),this.settings.containerDimensions&&this.setContainerDimensions(),void 0!==this.settings.onComplete&&this.settings.onComplete.call({Scroller:this})},requestAnimationFramePolyfill:function(){var t=0,e=0,i=["ms","moz","webkit"];for(e=0;e<i.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[i[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[e]+"CancelAnimationFrame"]||window[i[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),s=Math.max(0,16-(i-t)),n=window.setTimeout(function(){e(i+s)},s);return t=i+s,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})},setOffset:function(t){this.offset[t].x=window.pageXOffset,this.offset[t].y=window.pageYOffset},getOffset:function(t){return void 0!==this.offset[t]?this.offset[t]:this.offset},setContainerDimensions:function(){var e=this;e.container.width=window.innerWidth,e.container.height=window.innerHeight,t(window).on("resize.scroller orientationchange.scroller",function(){e.container.width=window.innerWidth,e.container.height=window.innerHeight})},getContainerDimensions:function(){return this.container},onScroll:function(e){var i=this;return t(window).on("scroll.scroller",function(t){clearTimeout(i.timeout),i.timeout=setTimeout(function(){i.setOffset("current"),i.hasDisplayElements()&&i.displayElementsOnScroll(),void 0!==e&&e.call({Scroller:i,event:t,window:window,containerDimensions:i.geContainerDimensions(),offset:i.getOffset(),direction:i.getScrollDirection()}),i.setOffset("previous")},i.settings.timeout)}),i},getScrollDirection:function(){return"x"===this.settings.axis?this.offset.previous.x>this.offset.current.x?this.direction="left":this.offset.previous.x<this.offset.current.x&&(this.direction="right"):this.offset.previous.y>this.offset.current.y?this.direction="up":this.direction="down",this.direction},displayElements:function(e){var i=this;return t.extend(i.settings.displayElements,e),i.setOptions({timeout:0,windowDimensions:!0}),i.setContainerDimensions(),void 0===i.settings.displayElements.element&&(i.settings.displayElements.element=t("."+i.settings.classes.toDisplay)),i.settings.displayElements.element.length&&i.settings.displayElements.element.each(function(){var e=t(this),s=e.offset();e.addClass(i.settings.classes.hidden);var n={element:e,offset:{top:parseInt(s.top),bottom:parseInt(s.top-e.height())}};"x"===i.settings.axis&&t.extend(n.offset,{left:parseInt(s.left),right:parseInt(s.left+e.width())}),i.toDisplay.push(n)}),i.displayElementsOnScroll(),i},hasDisplayElements:function(){return this.toDisplay.length},getDisplayLimit:function(){var t={x:0,y:0};return"x"===this.settings.axis?t.x=this.offset.current.x+this.container.width*this.settings.displayElements.percent/100:t.y=this.offset.current.y+this.container.height*this.settings.displayElements.percent/100,t},displayElementsOnScroll:function(){var e=this,i=e.getDisplayLimit();t.each(e.toDisplay,function(t,s){("y"===e.settings.axis&&i.y>=s.offset.top||"x"===e.settings.axis&&i.x>=s.offset.left)&&(s.element.removeClass(e.settings.classes.hidden),void 0!==e.settings.displayElements.onShow&&e.settings.displayElements.onShow.call({Scroller:e,toDisplay:s,displayLimit:i})),e.settings.displayElements.hide&&("y"===e.settings.axis&&i.y<s.offset.bottom||"x"===e.settings.axis&&i.x<s.offset.left)&&(s.element.addClass(e.settings.classes.hidden),void 0!==e.settings.displayElements.onHide&&e.settings.displayElements.onHide.call({Scroller:e,toDisplay:s,displayLimit:i}))})}}}(jQuery);